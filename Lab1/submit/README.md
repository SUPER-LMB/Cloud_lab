# how to run

源代码位于文件夹`/submit/src/Suduku`中，cd进入该目录中

`make`进行编译

输入`./sudoku_solve`,程序开始运行

然后输入要测试的文件名如`test1`,输入一个文件名后回车，**注意：一行一个文件名**

连续输入两个`回车`键，结束输入，程序开始运行

在程序运行的过程中，仍然可以从终端接收测试文件的输入

如下图：

<img src="run.png" alt="Sudoku" title="run" style="zoom:100%;" />

程序运行结束后，即可得到，解的数独个数以及解这些数独需要的时间

<img src="result.png" title="result" >

**默认使用dancelink算法，参数a-sudoku_min_arity算法，参数b-基础解法，参数c-sudoku_min_arity_cache算法**


# Repoprt：

# 1、 实验概要 

多线程编程是高性能编程的技术之一，实验 1 将针对数独求解问题比较多线
程与单线程的性能差异、同一功能不同代码实现的性能差异以及多线程在不同硬 件环境下的性能差异。

## 1.1 程序输入 

程序将在控制台接收用户输入，该输入应为某一目录下的一个数独谜题文件，
该文件包含多个数独谜题，每个数独谜题按固定格式存储在该文件中。

## 1.2 程序输出 

实验中把数独的解按与输入相对应的顺序写入到一个文件中。

## 1.3 Sudoku 算法 

实验共提供了 4 中不同的 Sudoku 求解算法：BASIC,DANCE,MINA 和 MINAC。其
中，DANCE 算法速度最快，BASIC 算法速度最慢。实验中默认选用的是最快的 DANCE
算法，可以通过设置参数来改变算法。

# 2、性能测试相关指标

## 2.1性能指标

&emsp;实验以求解完单个输入文件里的所有数独题并把数独的解按顺序写入文件所需要的时间开销作为性能指标。一般而言，可以用加速比直观地表示并行程序与串行程序之间的性能差异（加速比：串行执行时间与并行执行时间的比率，是串行与并行执行时间之间一个具体的比较指标）。

## 2.2实验环境

&emsp;&emsp;实验中共使用两个不同的环境：**ENV1**和**ENV2**。

&emsp;&emsp;**EVN1:** linux环境下4核。

&emsp;&emsp;**EVN2:** linux环境下2核。

## 2.3代码实现版本

&emsp;&emsp;实验中共使用两份不同的代码：**Code1**和**Code2**。

&emsp;&emsp;**Code1:** 原生的数独求解代码，即本实验中所提供的代码，只能以单线程模式运行。

&emsp;&emsp;**Code2:** 为适应多线程而在Code1上进行了一系列的修改和增添而成。在Code2中，可通过参数的调节而控制数独算法。

&emsp;&emsp;如无特别说明，默认使用Code2。


# 3、性能测试

## 3.1 单线程与多线程的比较

单线程程序只能利用1个CPU 核心，而多线程程序能使 CPU 的多个核心并行
运作，因此，多线程能够充分发挥多核 CPU 的优势。在一定范围内，加速比会随
着线程数的增加而增长，即时间开销越少、效率越高。当线程数超过 CPU 核心数
时，性能会有所下降、
单线程使用Code1代码；多线程使用Code2代码，默认6个线程

1、当使用dance-link算法时，1000个数独要解

单线程结果如下：

<img src="dancelinksingle.png">

多线程结果如下：

<img src="dancelinkmuti.png">

加速比约等于3.53:1

2、当使用sudoku_min_arity算法时，1000个数独要解

单线程结果如下：

<img src="artys.png">

多线程结果如下：

<img src="artym.png">

加速比约等于5.15:1

3、当使用sudoku_min_arity_cache算法时，1000个数独要解

单线程结果如下：

<img src="cmuti.png">

多线程结果如下：

<img src="cache.png">

加速比约等于4.88:1

4、当使用基础解法时，50个数独要解

单线程结果如下：

<img src="basic.png">

多线程结果如下：

<img src="bmutil.png">

加速比约等于4.91:1

## 3.2 不同硬件环境性能比较

多线程均采用6个线程

3.1 环境1

单线程：

<img  src="./zsh/zsh_singel.png">

多线程：

<img src="./zsh/zsh_multi.png">



3.2 环境2

单线程：

<img src="./xbq/xbqsignel.png">

多线程：

<img src="./xbq/sbqmulti.png">



3.3 环境3即为上述单线程与多线程比较的环境



**通过比较，可得，四种算法的加速比在不同的环境下均差不多**

